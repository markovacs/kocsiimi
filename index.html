<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>In Memory of [Name]</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(to bottom, #1a1a1a 0%, #000000 100%);
            color: #e0e0e0;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #000000 0%, #2c2c2c 100%);
            color: white;
            text-align: center;
            padding: 60px 20px 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.5);
            border-bottom: 2px solid #3a3a3a;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.95;
            font-style: italic;
        }

        .header .dates {
            margin-top: 15px;
            font-size: 1em;
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero-section {
            background: #2c2c2c;
            border-radius: 12px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.5);
            text-align: center;
            border: 1px solid #3a3a3a;
        }

        .hero-image {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #ffffff;
            margin: 0 auto 30px;
            display: block;
            box-shadow: 0 4px 12px rgba(255,255,255,0.1);
        }

        .tribute-text {
            font-size: 1.1em;
            color: #d0d0d0;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .section-title {
            text-align: center;
            font-size: 2em;
            color: #ffffff;
            margin: 50px 0 30px;
            position: relative;
            padding-bottom: 15px;
        }

        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(to right, #ffffff, #888888);
            border-radius: 2px;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .photo-item {
            background: #2c2c2c;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #3a3a3a;
        }

        .photo-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.7);
        }

        .photo-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }

        .photo-caption {
            padding: 15px;
            font-size: 0.95em;
            color: #b0b0b0;
            text-align: center;
            font-style: italic;
        }

        .memories-section {
            margin: 30px 0;
        }

        .memory-card {
            background: #2c2c2c;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.5);
            border: 1px solid #3a3a3a;
            border-left: 4px solid #ffffff;
        }

        .memory-card .author {
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .memory-card .text {
            color: #d0d0d0;
            line-height: 1.8;
            font-size: 1.05em;
        }

        .memory-card .date {
            margin-top: 15px;
            font-size: 0.9em;
            color: #888888;
            text-align: right;
        }

        .add-memory-btn {
            display: block;
            margin: 40px auto;
            padding: 15px 40px;
            background: #ffffff;
            color: #000000;
            border: 2px solid #ffffff;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }

        .add-memory-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3);
            background: #f0f0f0;
        }

        .footer {
            text-align: center;
            padding: 40px 20px;
            color: #888888;
            font-style: italic;
            margin-top: 60px;
            border-top: 1px solid #3a3a3a;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #2c2c2c;
            border-radius: 12px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.8);
            border: 1px solid #3a3a3a;
            animation: slideUp 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #3a3a3a;
        }

        .modal-header h2 {
            color: #ffffff;
            font-size: 1.8em;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            color: #888888;
            font-size: 2em;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #ffffff;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            color: #ffffff;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.05em;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: #1a1a1a;
            border: 1px solid #3a3a3a;
            border-radius: 6px;
            color: #e0e0e0;
            font-family: 'Georgia', serif;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ffffff;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 150px;
            line-height: 1.6;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #ffffff;
            color: #000000;
            border: 2px solid #ffffff;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease, background 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            background: #f0f0f0;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .header .subtitle { font-size: 1em; }
            .hero-section { padding: 25px; }
            .hero-image { width: 180px; height: 180px; }
            .tribute-text { font-size: 1em; }
            .section-title { font-size: 1.5em; }
            .photo-gallery { grid-template-columns: 1fr; gap: 15px; }
            .memory-card { padding: 20px; }
            .container { padding: 15px; }
        }

        @media (max-width: 480px) {
            .header { padding: 40px 15px 30px; }
            .header h1 { font-size: 1.5em; }
            .add-memory-btn { padding: 12px 30px; font-size: 1em; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Kocsi Imrére emlékezünk</h1>
        <div class="subtitle">Szívünkben köztünk élsz</div>
        <div class="dates">1960 - 2025</div>
    </div>

    <div class="container">
        <div class="hero-section">
            <img src="portrait.jpg" alt="Memorial Photo" class="hero-image">
            <div class="tribute-text">
                <p>Kocsi Imre nemcsak lelkes sportolóként, hanem elkötelezett helytörténeti kutatóként is ismert volt. Szívós kíváncsisága és szellemi igényessége révén gazdagította Tata történelmét, miközben közösségi szelleme és önzetlensége sokak számára jelentett inspirációt. A Kuny Domokos Múzeum és a tatai közösség mély megrendüléssel búcsúzik tőle, és emlékét örökké megőrzi. Halála súlyos veszteség a város számára, de életműve tovább él a közösség szellemi örökségében.</p>
            </div>
        </div>

        <h2 class="section-title">Képes memoár</h2>
        <div class="photo-gallery">
            <div class="photo-item">
                <img src="competition.jpg" alt="Competition Photo" >
                <div class="photo-caption">Mountain bike versenyen, 2017</div>
            </div>
            <div class="photo-item">
                <img src="friends.jpg" alt="Team Photo" >
                <div class="photo-caption">Csapattársaival díjátadáson</div>
            </div>
            <div class="photo-item">
                <img src="training.jpg" alt="Training Photo" >
                <div class="photo-caption">Mindig 100%-on teljesített, még edzéseken is</div>
            </div>
        </div>

        <h2 class="section-title">Megosztott emlékek</h2>
        <div class="memories-section">
            <!-- Existing memory cards go here -->
        </div>

        <button class="add-memory-btn">Osszd meg az emléked!</button>
    </div>

    <div class="footer">
        "Állandóság illik a férfiúhoz; nem a cél, melyet magának kitűzött: hanem az, hogy tántoríthatatlanul hű maradt céljához, adja meg becsét." - Eötvös József
    </div>

    <!-- Modal -->
    <div class="modal" id="memoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Osszd meg velünk az emlékedet Te is!</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>

            <!-- Toggle -->
            <div class="form-group">
                <label>Mit szeretnél megosztani? *</label>
                <select id="memoryType">
                    <option value="story" selected>Story / Emlék</option>
                    <option value="picture">Picture / Kép</option>
                </select>
            </div>

            <form id="memoryForm" novalidate>
                <!-- Story Fields -->
                <div id="storyFields">
                    <div class="form-group">
                        <label for="name">Neved! *</label>
                        <input type="text" id="name" required placeholder="Add meg a Neved!">
                    </div>
                    <div class="form-group">
                        <label for="connection">Kapcsolatod Imivel! *</label>
                        <input type="text" id="connection" required placeholder="Például edző, barát, családtag.">
                    </div>
                    <div class="form-group">
                        <label for="memory">Emléked! *</label>
                        <textarea id="memory" required placeholder="Oszdd meg velünk az emlékedet pár mondatban!"></textarea>
                    </div>
                </div>

                <!-- Picture Fields -->
                <div id="pictureFields" style="display:none;">
                    <div class="form-group">
                        <label for="pictureName">Neved! *</label>
                        <input type="text" id="pictureName" placeholder="Add meg a Neved!">
                    </div>
                    <div class="form-group">
                        <label for="pictureUpload">Kép feltöltése *</label>
                        <input type="file" id="pictureUpload" accept="image/*">
                    </div>
                    <div class="form-group">
                        <label for="pictureDesc">Rövid leírás a képről *</label>
                        <textarea id="pictureDesc" placeholder="Írj egy rövid leírást a képről"></textarea>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Küldd el Nekünk emailben, hogy megoszthassuk a világgal!</button>
            </form>
        </div>
    </div>

    <script>
        const modal = document.getElementById('memoryModal');
        const openModalBtn = document.querySelector('.add-memory-btn');
        const closeModalBtn = document.getElementById('closeModal');
        const memoryForm = document.getElementById('memoryForm');
        const memoryTypeSelect = document.getElementById('memoryType');
        const storyFields = document.getElementById('storyFields');
        const pictureFields = document.getElementById('pictureFields');

        // Toggle form fields
        memoryTypeSelect.addEventListener('change', () => {
            if(memoryTypeSelect.value === 'story') {
                storyFields.style.display = 'block';
                pictureFields.style.display = 'none';
            } else {
                storyFields.style.display = 'none';
                pictureFields.style.display = 'block';
            }
        });

        // Open modal
        openModalBtn.addEventListener('click', () => {
            modal.classList.add('active');
            setTimeout(() => document.getElementById('name').focus(), 80);
        });

        // Close modal
        closeModalBtn.addEventListener('click', () => modal.classList.remove('active'));
        modal.addEventListener('click', (e) => { if(e.target===modal) modal.classList.remove('active'); });

        function escapeHtml(str) {
            if(!str) return '';
            return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
        }

        memoryForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const today = new Date();
            const dateString = today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            let snippet = '';
            const email = "moderator@example.com"; 
            const subject = encodeURIComponent("New Memory Submission");

            if(memoryTypeSelect.value === 'story') {
                const nameRaw = document.getElementById('name').value.trim();
                const connectionRaw = document.getElementById('connection').value.trim();
                const memoryRaw = document.getElementById('memory').value.trim();
                if(!nameRaw || !connectionRaw || !memoryRaw) { alert('Please fill in all required fields.'); return; }
                const name = escapeHtml(nameRaw);
                const connection = escapeHtml(connectionRaw);
                const memory = escapeHtml(memoryRaw).replace(/\r?\n/g,'<br>');
                snippet = `<div class="memory-card"><div class="author">${name} – ${connection}</div><div class="text">${memory}</div><div class="date">Shared on ${dateString}</div></div>`;
            } else {
                const pictureNameRaw = document.getElementById('pictureName').value.trim();
                const pictureFile = document.getElementById('pictureUpload').files[0];
                const pictureDescRaw = document.getElementById('pictureDesc').value.trim();
                if(!pictureNameRaw || !pictureFile || !pictureDescRaw) { alert('Please fill in all required fields for picture.'); return; }
                const pictureName = escapeHtml(pictureNameRaw);
                const pictureDesc = escapeHtml(pictureDescRaw).replace(/\r?\n/g,'<br>');
                snippet = `<div class="memory-card"><div class="author">${pictureName} – Picture Submission</div><div class="text"><strong>File:</strong> ${pictureFile.name}<br><strong>Description:</strong> ${pictureDesc}</div><div class="date">Shared on ${dateString}</div></div>`;
            }

            const body = encodeURIComponent(snippet);
            memoryForm.reset();
            modal.classList.remove('active');
            window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
        });
    </script>
</body>
</html>
